<% provide(:title, "Home") %>
<body>
  

<% user_1 = @users.all.sample %>
<% friend_id_array = []  %> <%# for user_1 %>

<%# to avoid duplicate reviews from the same friend_id, friend_id's are turned into a set  %>
<%@friends.where(user_id: user_1.id).each do |friend| %>
  <%  friend_id_array << friend.friend_id  %>
<%end %>
<% friend_id_array = friend_id_array.uniq %>


<div class="page-header">
  <h1><%= user_1.username %>'s We-View</h1><small>Refresh this page for a different random user!</small>
</div>

<div class="friend-list">

  <h2>Friends</h2>
    <ol>
    <%friend_id_array.each do |friend| %>
    <li><%= @users.where(id: friend).first.username %></li>
  <%end %>
</ol>
</div>

<div class="reveiw-container">
  <div class="container">
    <div class="jumbotron">
    <h1>Reviews</h1>
    <h2> Here is what your friends reviewed!</h2>
    </div>
    <div class="jumbotron">
      <%friend_id_array.each do |friend| %>
      
        <h3 class= "friend-name"><%= @users.where(id: friend).first.username %></h3>
        <% @reviews.where(user_id: friend).each do |friend_who_reviewed| %>
      <ul>   <li> <u><b><p><%= friend_who_reviewed.media %>:</p></b></u></li>
          <p><%= friend_who_reviewed.content %></p>
       </ul>   
          <%end%>
      
      <%end %>
    </div>
  </div>
</div>
</body>


